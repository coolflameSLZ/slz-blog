---
title: 监控规范
toc: true
categories:
  - 后端

tags:
  - devOps
  - 技术规范
hide: true
date: 2021-07-30 17:27:14
---



去吧，把服务照明

<!-- more -->

------



## 常见监控点



### 系统层



|            | 监控点 | 常用监控方案及工具 | 常见指标 | 报警点 |
| ---------- | ------ | ------------------ | -------- | ------ |
| 虚拟机监控 |        |                    |          |        |
| 容器监控   |        |                    |          |        |
|            |        |                    |          |        |



### 网络层

|                | 监控点 | 常用监控方案及工具 | 常见指标 | 报警点 |
| -------------- | ------ | ------------------ | -------- | ------ |
| 监控专线带宽   |        |                    |          |        |
| 交换机基本情况 |        |                    |          |        |
| 网络延迟       |        |                    |          |        |





### 中间件

|          | 监控点 | 常用监控方案及工具 | 常见指标 | 报警点 |
| -------- | ------ | ------------------ | -------- | ------ |
| 注册中心 |        |                    |          |        |
|          |        |                    |          |        |
| mysql    |        |                    |          |        |
|          |        |                    |          |        |
| redis    |        |                    |          |        |
|          |        |                    |          |        |
| es       |        |                    |          |        |
|          |        |                    |          |        |



### 应用程序本身

|            | 监控点 | 常用监控方案及工具 | 常见指标 | 报警点 |
| ---------- | ------ | ------------------ | -------- | ------ |
| jvm        |        |                    |          |        |
|            |        |                    |          |        |
| GC         |        |                    |          |        |
|            |        |                    |          |        |
| 内存       |        |                    |          |        |
|            |        |                    |          |        |
| 线程       |        |                    |          |        |
|            |        |                    |          |        |
| 队列       |        |                    |          |        |
|            |        |                    |          |        |
| 缓存       |        |                    |          |        |
|            |        |                    |          |        |
| 可用性     |        |                    |          |        |
|            |        |                    |          |        |
| 业务正确性 |        |                    |          |        |





## 日志规范

#### 日志规范

1. 对外服务接口，所有if分支需要打印日志
2. 使用日志异步配置
3. 禁止打印全部实体，打印实体id即可，实体关键属性即可
4. 打印traceId



#### 日志分级

- DEBUG 用于开发调试；敏感信息一律使用debug。
- INFO 用于重要流程信息；if 各种分支
- WARN 用于需要关注但无需报警的问题；一般是为了方便排查的日志。
- ERROR 需要报警的异常；一般是系统异常、需要人工介入的业务异常



#### 日志分割

近期（7天内）日志，根据日期&大小分割，保存日志原文。<br>如果有日志平台，则不需要保存长期日志<br>没有日志平台的话，需要保存30天日志，根据日期分割，使用压缩格式，文件中要体现时间。



#### 日志中的信息

- 

